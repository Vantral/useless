# Подготовка к контрольной работе № 2

## Задача № 1

Для этой задачи нам понадобится датасет диалогов человека с виртуальным голосовым ассистентом.
Скачать его можно по ссылке - [dialogues_001.json](https://raw.githubusercontent.com/google-research-datasets/dstc8-schema-guided-dialogue/master/train/dialogues_001.json)

> Этот датасет используется для обучения нейросетевых голосовых ассистентов. Подробное описание схемы файла есть на странице [репозитория](https://github.com/google-research-datasets/dstc8-schema-guided-dialogue).

Ваша задача составить частотный словарь биграм по репликам человека. Реплики человека лежат в поле `utterance` каждой реплики (`turns`) каждого диалога. Определить то, что говорит человек, можно по полю `speaker` реплики, которое должно быть равно `USER`. Слова в биграммах должны быть очищены от знаков препинания и приведены к нижнему регистру.

Диалоги сохранены в формате `json`. Чтобы загружить файл в вашу программу используйте следующий код:

```python
import json

with open('filename.json') as file:
    dialogues = json.load(file)
```

Этот код загружает список диалогов в переменную `dialogues`. Каждый диалог будет представлен словарем.

Построенный словарь нужно сохранить в отдельный файл в формате:

```
(word, word) -> freq
```

Биграммы в файле должны быть отсортированы в порядке убывания частоты.


## Задание №2

Для данного задания вам понадобится файл с выводом программы mystem в текстовом формате без морфологии.
Скачайте его по [ссылке](https://storage.yandexcloud.net/pykili/test02%2Fmystem_output.txt)

Вывод программы - это одна строка, в которой перечислены все слова и их леммы заключенные в фигурные скобки `{}`.

```
СЛОВО{ЛЕММА|ВТОРАЯ_ЛЕММА|...}ДРУГОЕ_СЛОВО{...}
```

В фигурных скобках `{}` напечатаны все возможные леммы, разделенные `|`. Самая первая лемма слева - самая вероятная.


Если программа не уверена в данной лемме, она будет напечатана с вопросительным знаком на конце:

```
СЛОВО{ЛЕММА?|ВТОРАЯ_ЛЕММА?}
```

Если программе не удалось определить лемму, то вместо леммы в фигурных скобках будет напечатано само слово и 2 вопросительных знака:

```
СЛОВО{ЛЕММА??}
```

**Ваша задача** прочитать файл с выводом программы, распарсить его с помощью регулярных выражений и записать в другой файл все слова, длина которых строго больше 4 символов и количество лемм больше или равно двум в таком формате:

```
СЛОВО -> лемма,лемма
```

Леммы должны быть записаны без вопросительных знаков и приведены к нижнему регистру.
Список нужно отсортировать в порядке убывания количества лемма у слова.

Например, если файл содержит такой текст:

```
Привет{привет}это{это|этот}даже{даже}лучше{хорошо|хороший}черных{черный|черные|черных|черная}
```

То в другой файл нужно записать следующее:

```
черных -> черный,черные,черных,черная
лучше -> хорошо,хороший
```
